<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>PHPUnit マニュアル &#8211; 第12章 テストのその他の使用法</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="other-uses-for-tests.html">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/highlight.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700%7CSource+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <!--[if lt IE 9]><script src="js/html5shiv.min.js"></script><![endif]-->
 </head>
 <body>
  
  <div class="container-fluid">
   <div class="row">
    <div style='padding: 1.5em'>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="code-coverage-analysis.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="selenium.html">次へ</a></div>
     </div>
<div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="other-uses-for-tests"></a>第12章 テストのその他の使用法</h1></div></div></div><p>
    自動テストに慣れてくると、
    ほかの目的のためにもテストを使いたくなってくることでしょう。
    ここではそんな例を説明します。
  </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="testing-practices.agile-documentation"></a>アジャイルな文書作成</h2></div></div></div><p>
      <a id="idp182592" class="indexterm"></a>
      <a id="idp183136" class="indexterm"></a>
      <a id="idp183712" class="indexterm"></a>
      <a id="idp184256" class="indexterm"></a>

      一般的に、エクストリームプログラミングのようなアジャイルプロセスを採用しているプロジェクトでは、
      ドキュメントの内容が実際の設計やコードに追いついていないことが多いものです。
      エクストリームプログラミングでは <span class="emphasis"><em>コードの共同所有
      (collective code ownership)</em></span> を要求しており、
      すべての開発者がシステム全体の動作を知っておく必要があります。
      作成するテストに対して、そのクラスが何を行うべきなのかを示すような
      「わかりやすい」名前をつけられるようにさえしておけば、PHPUnit の
      TestDox 機能を使用して自動的にドキュメントを生成することができます。
      このドキュメントにより、開発者たちはプロジェクト内の各クラスが
      どのようにふるまうべきなのかを知ることができます。
    </p><p>
      PHPUnit の TestDox 機能は、テストクラス内のすべてのテストメソッドの名前を抽出し、
      それを PHP 風のキャメルケースから通常の文に変換します。つまり
      <code class="literal">testBalanceIsInitiallyZero()</code> が "Balance is initially zero"
      のようになるわけです。最後のほうの数字のみが違うメソッド、例えば
      <code class="literal">testBalanceCannotBecomeNegative()</code> と
      <code class="literal">testBalanceCannotBecomeNegative2()</code> のようなものが存在した場合は、
      文 "Balance cannot become negative" は一度のみ表示され、
      全てのテストが成功したことを表します。
    </p><p>
      <code class="literal">BankAccount</code> クラスのアジャイルな文書を見てみましょう。
    </p><pre class="screen"><strong class="userinput"><code>phpunit --testdox BankAccountTest</code></strong>
PHPUnit 4.2.0 by Sebastian Bergmann.

BankAccount
 [x] Balance is initially zero
 [x] Balance cannot become negative</pre><p>
      また、アジャイルな文書を HTML あるいはプレーンテキスト形式で作成してファイルに書き出すこともできます。
      この場合は、引数 <code class="literal">--testdox-html</code>
      あるいは <code class="literal">--testdox-text</code> を使用します。
    </p><p>
      <a id="idp840272" class="indexterm"></a>

      アジャイルな文書は、プロジェクト内であなたが作成しようとしている外部パッケージについて、
      このように動作するであるという期待をまとめた文書にもなります。
      外部のパッケージを使用するときには、
      そのパッケージが期待通りに動作しなくなるというリスクに常にさらされています。
      パッケージのバージョンアップにより知らないうちに挙動が変わってしまい、
      あなたのコードが動作しなくなる可能性もあります。そのようなことを避けるため、
      「このパッケージはこのように動作するはず」
      ということを常にテストケースで記述しておくようにします。テストが成功すれば、
      期待通りに動作していることがわかります。もし動作仕様をすべてテストで記述できているのなら、
      外部パッケージが将来バージョンアップされたとしても何の心配もいりません。
      テストをクリアしたということは、システムは期待通りに動作するということだからです。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="testing-practices.cross-team-tests"></a>複数チームでのテスト</h2></div></div></div><p>
      あるパッケージについての機能を文書化するためにテストを書いているとき、
      そのテストの所有者はあなたです。今あなたがテストを作成しているパッケージの作者は、
      そのテストのことについては何も知りません。パッケージの作者とよりつながりを深めるため、
      作成したテストを使用してコミュニケートしたり、
      そのテストを使用して共同作業をしたりすることができるでしょう。
    </p><p>
      あなたが作成したテストを使用してパッケージの作者と共同作業をすることになれば、
      テストも共同で書くことになります。そうすることで、
      より多くのテストケースを挙げられるようになるでしょう。
      「暗黙の了解」などに頼っていては、共同作業はできません。
      テストと同時に、あなたはそのパッケージに対して期待していることを正確に文書化することになります。
      また、すべてのテストにクリアした時点で、
      作者はパッケージが完成したことを知ることになります。
    </p><p>
      <a id="idp865568" class="indexterm"></a>

      スタブ (本書の前のほうで説明した "モックオブジェクト" の章を参照ください)
      を使用することで、パッケージの作者と別れても作業できるようになります。
      パッケージ作者の仕事は、パッケージの実際の実装でテストをクリアするようにすること。
      そしてあなたの仕事はあなたが書いたコードでテストをクリアするようにすることです。
      この段階になれば、あなたはスタブオブジェクトを使用すればよいのです。
      このやり方により、2 つのチームが独立して開発できるようになります。
    </p></div></div>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="code-coverage-analysis.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="selenium.html">次へ</a></div>
     </div>
<div class="row"><div class="col-md-2"></div><div class="col-md-8"><div class="alert alert-info" style="text-align: center;">このページの改善案を<a href="https://github.com/sebastianbergmann/phpunit-documentation/issues">GitHubで提案</a>してください!</div></div><div class="col-md-2"></div></div>
    </div>
   </div>
   <hr/>
   <footer>
    <p><a href="appendixes.copyright.html">Copyright</a> &copy; 2005-2014 <a href="http://sebastian-bergmann.de/">Sebastian Bergmann</a>.</p>
   </footer>
  </div>
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/highlight.pack.js"></script>
  <script type="text/javascript">
  $(document).ready(function() { $('pre.programlisting').each(function(i, e) {hljs.highlightBlock(e)}); });

  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.sebastian-bergmann.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
  </script>
 </body>
</html>
