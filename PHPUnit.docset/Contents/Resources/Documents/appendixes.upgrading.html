<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>PHPUnit マニュアル &#8211; 付録D アップグレード</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="appendixes.upgrading.html">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/highlight.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700%7CSource+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <!--[if lt IE 9]><script src="js/html5shiv.min.js"></script><![endif]-->
 </head>
 <body>
  
  <div class="container-fluid">
   <div class="row">
    <div style='padding: 1.5em'>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="appendixes.configuration.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="appendixes.index.html">次へ</a></div>
     </div>
<div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="appendixes.upgrading"></a>付録D アップグレード</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.upgrading.phpunit-4-0"></a>PHPUnit 3.7 から PHPUnit 4.0 へのアップグレード</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          PHPUnit 3.5 以降で、<a class="ulink" href="http://sebastian-bergmann.de/blog/883-Stubbing-and-Mocking-Static-Methods.html" target="_top">static
          メソッドのスタブやモックの作成</a> を限定的にサポートしていましたが、
          この機能は削除されました。
          この機能がうまく動くのは、スタブあるいはモックの対象となる static
          メソッドが、同じクラスの別のメソッドから呼ばれた場合だけでした。
          そんな限られた場面でしか使えない機能のせいで、
          テストダブルのコードジェネレーターが複雑になってしまうのは、
          好ましくないと考えたのです。
          いままでこの機能を使ってテストをしていたコードは、
          リファクタリングが必要になるかもしれません。
          お手数をおかけして申し訳ございません。
        </p></li><li class="listitem"><p>
          <code class="code">PHPUnit_Framework_TestListener</code> インターフェイスに
          <code class="code">addRiskyTest()</code> が追加されました。
          <code class="code">PHPUnit_Framework_TestListener</code>
          インターフェイスを実装するクラスは、新たにこのメソッドを実装する必要があります。
          たとえば PHPStorm 7 で PHPUnit 4 が使えないのは、これが原因です。
        </p></li><li class="listitem"><p>
          <a class="ulink" href="https://github.com/sebastianbergmann/phpunit/issues/552" target="_top">#552</a>、
          <a class="ulink" href="https://github.com/sebastianbergmann/phpunit/issues/573" target="_top">#573</a>、
          そして <a class="ulink" href="https://github.com/sebastianbergmann/phpunit/issues/582" target="_top">#582</a>
          の修正のために、PHPUnit の XML 設定ファイル上での相対パスの扱いを変更せざるを得ませんでした。
          設定ファイル内での相対パスは、設定ファイルがある場所を基準として解決するようになりました。
          PHPUnit をアップグレードする際には、
          <code class="code">testSuiteLoaderFile</code> や <code class="code">printerFile</code>、
          <code class="code">testsuites/file</code>、そして <code class="code">testsuites/exclude</code>
          の相対パスもあわせて更新する必要があるかもしれません。
        </p></li><li class="listitem"><p>
          <a class="ulink" href="https://github.com/sebastianbergmann/phpunit/commit/f5df97cda0b25f2b7368395344da095ac529de62" target="_top">
          二つの文字列を渡したときに、数値としての比較を実行しないようになりました
          </a>。
        </p></li></ul></div><p>
      PHPUnit 4.0.0 以降は、PHPUnit の PEAR パッケージは単なる PHP Archive (PHAR)
      の配布手段に過ぎなくなります。PHPUnit が使う依存パッケージの大半は、
      PEAR 経由ではリリースされなくなります。
      最終的には、PHPUnit 自体も PEAR からはリリースしなくするつもりです。
    </p><p>
      PEAR インストーラーを使って PHPUnit 3.7 から PHPUnit 4.0 にアップデートすると、
      旧版の PHPUnit が使っていた依存パッケージ (PHP_CodeCoverage や PHPUnit_MockObject
      など) が PEAR ディレクトリに残ったままになってしまいます。
      これらの PEAR パッケージについては、個別にアンインストールすることをお勧めします。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.upgrading.phpunit-4-1"></a>PHPUnit 4.0 から PHPUnit 4.1 へのアップグレード</h2></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.upgrading.phpunit-4-2"></a>PHPUnit 4.1 から PHPUnit 4.2 へのアップグレード</h2></div></div></div></div></div>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="appendixes.configuration.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="appendixes.index.html">次へ</a></div>
     </div>
<div class="row"><div class="col-md-2"></div><div class="col-md-8"><div class="alert alert-info" style="text-align: center;">このページの改善案を<a href="https://github.com/sebastianbergmann/phpunit-documentation/issues">GitHubで提案</a>してください!</div></div><div class="col-md-2"></div></div>
    </div>
   </div>
   <hr/>
   <footer>
    <p><a href="appendixes.copyright.html">Copyright</a> &copy; 2005-2014 <a href="http://sebastian-bergmann.de/">Sebastian Bergmann</a>.</p>
   </footer>
  </div>
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/highlight.pack.js"></script>
  <script type="text/javascript">
  $(document).ready(function() { $('pre.programlisting').each(function(i, e) {hljs.highlightBlock(e)}); });

  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.sebastian-bergmann.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
  </script>
 </body>
</html>
