<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>PHPUnit マニュアル &#8211; 付録B アノテーション</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="appendixes.annotations.html">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/highlight.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <!--[if lt IE 9]><script src="js/html5shiv.min.js"></script><![endif]-->
 </head>
 <body>
  
  <div class="container-fluid">
   <div class="row">
    <div class="col-md-4 col-lg-3">
     <div class="well well-sm sidebar-nav">
<dl class="toc nav hidden-print"><dt><span class="chapter"><a href="installation.html">1. PHPUnit のインストール</a></span></dt><dd><dl><dt><span class="section"><a href="installation.html#installation.requirements">要件</a></span></dt><dt><span class="section"><a href="installation.html#installation.phar">PHP Archive (PHAR)</a></span></dt><dd><dl><dt><span class="section"><a href="installation.html#installation.phar.windows">Windows</a></span></dt><dt><span class="section"><a href="installation.html#installation.phar.verification">PHPUnit の PHAR リリースの検証</a></span></dt></dl></dd><dt><span class="section"><a href="installation.html#installation.composer">Composer</a></span></dt><dt><span class="section"><a href="installation.html#installation.optional-packages">オプションのパッケージ</a></span></dt></dl></dd><dt><span class="chapter"><a href="writing-tests-for-phpunit.html">2. PHPUnit 用のテストの書き方</a></span></dt><dd><dl><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.test-dependencies">テストの依存性</a></span></dt><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers">データプロバイダ</a></span></dt><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions">例外のテスト</a></span></dt><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.errors">PHP のエラーのテスト</a></span></dt><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.output">出力内容のテスト</a></span></dt><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.error-output">エラー出力</a></span></dt><dd><dl><dt><span class="section"><a href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.error-output.edge-cases">エッジケース</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="textui.html">3. コマンドラインのテストランナー</a></span></dt><dd><dl><dt><span class="section"><a href="textui.html#textui.clioptions">コマンドラインオプション</a></span></dt></dl></dd><dt><span class="chapter"><a href="fixtures.html">4. フィクスチャ</a></span></dt><dd><dl><dt><span class="section"><a href="fixtures.html#fixtures.more-setup-than-teardown">tearDown() よりも setUp()</a></span></dt><dt><span class="section"><a href="fixtures.html#fixtures.variations">バリエーション</a></span></dt><dt><span class="section"><a href="fixtures.html#fixtures.sharing-fixture">フィクスチャの共有</a></span></dt><dt><span class="section"><a href="fixtures.html#fixtures.global-state">グローバルな状態</a></span></dt></dl></dd><dt><span class="chapter"><a href="organizing-tests.html">5. テストの構成</a></span></dt><dd><dl><dt><span class="section"><a href="organizing-tests.html#organizing-tests.filesystem">ファイルシステムを用いたテストスイートの構成</a></span></dt><dt><span class="section"><a href="organizing-tests.html#organizing-tests.xml-configuration">XML 設定ファイルを用いたテストスイートの構成</a></span></dt></dl></dd><dt><span class="chapter"><a href="risky-tests.html">6. リスクを伴うテスト</a></span></dt><dd><dl><dt><span class="section"><a href="risky-tests.html#risky-tests.useless-tests">無意味なテスト</a></span></dt><dt><span class="section"><a href="risky-tests.html#risky-tests.unintentionally-covered-code">意図せぬうちにカバーされているコード</a></span></dt><dt><span class="section"><a href="risky-tests.html#risky-tests.output-during-test-execution">テストの実行時の出力</a></span></dt><dt><span class="section"><a href="risky-tests.html#risky-tests.test-execution-timeout">テストの実行時のタイムアウト</a></span></dt><dt><span class="section"><a href="risky-tests.html#risky-tests.global-state-manipulation">グローバルな状態の変更</a></span></dt></dl></dd><dt><span class="chapter"><a href="incomplete-and-skipped-tests.html">7. 不完全なテスト・テストの省略</a></span></dt><dd><dl><dt><span class="section"><a href="incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.incomplete-tests">不完全なテスト</a></span></dt><dt><span class="section"><a href="incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.skipping-tests">テストの省略</a></span></dt><dt><span class="section"><a href="incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.skipping-tests-using-requires">@requires によるテストのスキップ</a></span></dt></dl></dd><dt><span class="chapter"><a href="database.html">8. データベースのテスト</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.supported-vendors-for-database-testing">データベースのテストに対応しているベンダー</a></span></dt><dt><span class="section"><a href="database.html#database.difficulties-in-database-testing">データベースのテストの難しさ</a></span></dt><dt><span class="section"><a href="database.html#database.the-four-stages-of-a-database-test">データベーステストの四段階</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.clean-up-database">1. データベースのクリーンアップ</a></span></dt><dt><span class="section"><a href="database.html#database.set-up-fixture">2. フィクスチャの準備</a></span></dt><dt><span class="section"><a href="database.html#database.run-test-verify-outcome-and-teardown">3–5. テストの実行、結果の検証、そして後始末</a></span></dt></dl></dd><dt><span class="section"><a href="database.html#database.configuration-of-a-phpunit-database-testcase">PHPUnit のデータベーステストケースの設定</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.implementing-getconnection">getConnection() の実装</a></span></dt><dt><span class="section"><a href="database.html#database.implementing-getdataset">getDataSet() の実装</a></span></dt><dt><span class="section"><a href="database.html#database.what-about-the-database-schema-ddl">データベーススキーマ (DDL) とは?</a></span></dt><dt><span class="section"><a href="database.html#database.tip-use-your-own-abstract-database-testcase">ヒント: 自前でのデータベーステストケースの抽象化</a></span></dt></dl></dd><dt><span class="section"><a href="database.html#database.understanding-datasets-and-datatables">データセットとデータテーブルについて知る</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.available-implementations">利用できる実装</a></span></dt><dt><span class="section"><a href="database.html#database.beware-of-foreign-keys">外部キーには注意</a></span></dt><dt><span class="section"><a href="database.html#database.implementing-your-own-datasetsdatatables">自作のデータセットやデータテーブルの実装</a></span></dt></dl></dd><dt><span class="section"><a href="database.html#database.the-connection-api">接続 API</a></span></dt><dt><span class="section"><a href="database.html#database.database-assertions-api">データベースアサーション API</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.asserting-the-row-count-of-a-table">テーブルの行数のアサーション</a></span></dt><dt><span class="section"><a href="database.html#database.asserting-the-state-of-a-table">テーブルの状態のアサーション</a></span></dt><dt><span class="section"><a href="database.html#database.asserting-the-result-of-a-query">クエリの結果のアサーション</a></span></dt><dt><span class="section"><a href="database.html#database.asserting-the-state-of-multiple-tables">複数のテーブルの状態のアサーション</a></span></dt></dl></dd><dt><span class="section"><a href="database.html#database.frequently-asked-questions">よくある質問</a></span></dt><dd><dl><dt><span class="section"><a href="database.html#database.will-phpunit-re-create-the-database-schema-for-each-test">PHPUnit は、テストごとにデータベーススキーマを作り直すの?</a></span></dt><dt><span class="section"><a href="database.html#database.am-i-required-to-use-pdo-in-my-application-for-the-database-extension-to-work">PDO を使ったアプリケーションじゃないと Database Extension を使えないの?</a></span></dt><dt><span class="section"><a href="database.html#database.what-can-i-do-when-i-get-a-too-much-connections-error"><span class="quote">「<span class="quote">Too much Connections</span>」</span> というエラーが出たらどうすればいい?</a></span></dt><dt><span class="section"><a href="database.html#database.how-to-handle-null-with-flat-xml-csv-datasets">フラット XML や CSV のデータセットで NULL を扱う方法は?</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="test-doubles.html">9. テストダブル</a></span></dt><dd><dl><dt><span class="section"><a href="test-doubles.html#test-doubles.stubs">スタブ</a></span></dt><dt><span class="section"><a href="test-doubles.html#test-doubles.mock-objects">モックオブジェクト</a></span></dt><dt><span class="section"><a href="test-doubles.html#test-doubles.prophecy">Prophecy</a></span></dt><dt><span class="section"><a href="test-doubles.html#test-doubles.mocking-traits-and-abstract-classes">トレイトと抽象クラスのモック</a></span></dt><dt><span class="section"><a href="test-doubles.html#test-doubles.stubbing-and-mocking-web-services">ウェブサービスのスタブおよびモック</a></span></dt><dt><span class="section"><a href="test-doubles.html#test-doubles.mocking-the-filesystem">ファイルシステムのモック</a></span></dt></dl></dd><dt><span class="chapter"><a href="testing-practices.html">10. テストの進め方</a></span></dt><dd><dl><dt><span class="section"><a href="testing-practices.html#testing-practices.during-development">開発中のテスト</a></span></dt><dt><span class="section"><a href="testing-practices.html#testing-practices.during-debugging">デバッグ中のテスト</a></span></dt></dl></dd><dt><span class="chapter"><a href="code-coverage-analysis.html">11. コードカバレッジ解析</a></span></dt><dd><dl><dt><span class="section"><a href="code-coverage-analysis.html#code-coverage-analysis.metrics">コードカバレッジの指標</a></span></dt><dt><span class="section"><a href="code-coverage-analysis.html#code-coverage-analysis.whitelisting-files">ファイルのホワイトリスト</a></span></dt><dt><span class="section"><a href="code-coverage-analysis.html#code-coverage-analysis.ignoring-code-blocks">コードブロックの無視</a></span></dt><dt><span class="section"><a href="code-coverage-analysis.html#code-coverage-analysis.specifying-covered-methods">カバーするメソッドの指定</a></span></dt><dt><span class="section"><a href="code-coverage-analysis.html#code-coverage-analysis.edge-cases">エッジケース</a></span></dt></dl></dd><dt><span class="chapter"><a href="other-uses-for-tests.html">12. テストのその他の使用法</a></span></dt><dd><dl><dt><span class="section"><a href="other-uses-for-tests.html#testing-practices.agile-documentation">アジャイルな文書作成</a></span></dt><dt><span class="section"><a href="other-uses-for-tests.html#testing-practices.cross-team-tests">複数チームでのテスト</a></span></dt></dl></dd><dt><span class="chapter"><a href="logging.html">13. ログ出力</a></span></dt><dd><dl><dt><span class="section"><a href="logging.html#logging.xml">テスト結果 (XML)</a></span></dt><dt><span class="section"><a href="logging.html#logging.codecoverage.xml">コードカバレッジ (XML)</a></span></dt><dt><span class="section"><a href="logging.html#logging.codecoverage.text">コードカバレッジ (テキスト)</a></span></dt></dl></dd><dt><span class="chapter"><a href="extending-phpunit.html">14. PHPUnit の拡張</a></span></dt><dd><dl><dt><span class="section"><a href="extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestCase">PHPUnit\Framework\TestCase のサブクラスの作成</a></span></dt><dt><span class="section"><a href="extending-phpunit.html#extending-phpunit.custom-assertions">カスタムアサーションの作成</a></span></dt><dt><span class="section"><a href="extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestListener">PHPUnit\Framework\TestListener の実装</a></span></dt><dt><span class="section"><a href="extending-phpunit.html#extending-phpunit.PHPUnit_Extensions_TestDecorator">PHPUnit_Extensions_TestDecorator のサブクラスの作成</a></span></dt><dt><span class="section"><a href="extending-phpunit.html#extending-phpunit.PHPUnit_Framework_Test">PHPUnit_Framework_Test の実装</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.assertions.html">A. アサーション</a></span></dt><dd><dl><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.static-vs-non-static-usage-of-assertion-methods">アサーションメソッドはstaticで使うべきか、それとも非staticで使うべきか</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertArrayHasKey">assertArrayHasKey()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertClassHasAttribute">assertClassHasAttribute()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertArraySubset">assertArraySubset()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertClassHasStaticAttribute">assertClassHasStaticAttribute()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertContains">assertContains()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertContainsOnly">assertContainsOnly()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertContainsOnlyInstancesOf">assertContainsOnlyInstancesOf()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertCount">assertCount()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertDirectoryExists">assertDirectoryExists()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertDirectoryIsReadable">assertDirectoryIsReadable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertDirectoryIsWritable">assertDirectoryIsWritable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertEmpty">assertEmpty()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertEqualXMLStructure">assertEqualXMLStructure()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertEquals">assertEquals()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertFalse">assertFalse()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertFileEquals">assertFileEquals()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertFileExists">assertFileExists()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertFileIsReadable">assertFileIsReadable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertFileIsWritable">assertFileIsWritable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertGreaterThan">assertGreaterThan()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertGreaterThanOrEqual">assertGreaterThanOrEqual()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertInfinite">assertInfinite()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertInstanceOf">assertInstanceOf()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertInternalType">assertInternalType()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertIsReadable">assertIsReadable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertIsWritable">assertIsWritable()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertJsonFileEqualsJsonFile">assertJsonFileEqualsJsonFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertJsonStringEqualsJsonFile">assertJsonStringEqualsJsonFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertJsonStringEqualsJsonString">assertJsonStringEqualsJsonString()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertLessThan">assertLessThan()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertLessThanOrEqual">assertLessThanOrEqual()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertNan">assertNan()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertNull">assertNull()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertObjectHasAttribute">assertObjectHasAttribute()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertRegExp">assertRegExp()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertStringMatchesFormat">assertStringMatchesFormat()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertStringMatchesFormatFile">assertStringMatchesFormatFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertSame">assertSame()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertStringEndsWith">assertStringEndsWith()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertStringEqualsFile">assertStringEqualsFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertStringStartsWith">assertStringStartsWith()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertThat">assertThat()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertTrue">assertTrue()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertXmlFileEqualsXmlFile">assertXmlFileEqualsXmlFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertXmlStringEqualsXmlFile">assertXmlStringEqualsXmlFile()</a></span></dt><dt><span class="section"><a href="appendixes.assertions.html#appendixes.assertions.assertXmlStringEqualsXmlString">assertXmlStringEqualsXmlString()</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.annotations.html" class="active">B. アノテーション</a></span></dt><dd><dl><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.author">@author</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.after">@after</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.afterClass">@afterClass</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.backupGlobals">@backupGlobals</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.backupStaticAttributes">@backupStaticAttributes</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.before">@before</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.beforeClass">@beforeClass</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.codeCoverageIgnore">@codeCoverageIgnore*</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.covers">@covers</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.coversDefaultClass">@coversDefaultClass</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.coversNothing">@coversNothing</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.dataProvider">@dataProvider</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.depends">@depends</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.expectedException">@expectedException</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.expectedExceptionCode">@expectedExceptionCode</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.expectedExceptionMessage">@expectedExceptionMessage</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.expectedExceptionMessageRegExp">@expectedExceptionMessageRegExp</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.group">@group</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.large">@large</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.medium">@medium</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.preserveGlobalState">@preserveGlobalState</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.requires">@requires</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.runTestsInSeparateProcesses">@runTestsInSeparateProcesses</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.runInSeparateProcess">@runInSeparateProcess</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.small">@small</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.test">@test</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.testdox">@testdox</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.ticket">@ticket</a></span></dt><dt><span class="section"><a href="appendixes.annotations.html#appendixes.annotations.uses">@uses</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.configuration.html">C. XML 設定ファイル</a></span></dt><dd><dl><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.phpunit">PHPUnit</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.testsuites">テストスイート</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.groups">グループ</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.whitelisting-files">コードカバレッジ対象のファイルのホワイトリスト</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.logging">ログ出力</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.test-listeners">テストリスナー</a></span></dt><dt><span class="section"><a href="appendixes.configuration.html#appendixes.configuration.php-ini-constants-variables">PHP INI 項目や定数、グローバル変数の設定</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.index.html">D. 目次</a></span></dt><dd><dl><dt><span class="index"><a href="appendixes.index.html#appendixes.index.index"></a></span></dt></dl></dd><dt><span class="appendix"><a href="appendixes.bibliography.html">E. 参考文献</a></span></dt><dt><span class="appendix"><a href="appendixes.copyright.html">F. 著作権</a></span></dt></dl>
     </div>
    </div>
    <div class="col-md-8 col-lg-9">
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="appendixes.assertions.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="appendixes.configuration.html">次へ</a></div>
     </div>
<div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="appendixes.annotations"></a>付録B アノテーション</h1></div></div></div><p>
    <a id="idp1380144" class="indexterm"></a>

    アノテーションとはメタデータを表す特別な構文のことで、
    プログラミング言語のソースコードに追加することができます。
    PHP そのものにはソースコードにアノテーションする専用の仕組みはありませんが、
    ドキュメンテーションブロックに <code class="literal">@アノテーション名 引数</code>
    のようなタグを書くことでアノテーションを表すという記法が
    PHP コミュニティ内で一般に使われています。
    PHP では、リフレクション API の <code class="literal">getDocComment()</code>
    メソッドを使えば関数、クラス、メソッド、属性
    それぞれのドキュメンテーションブロックにアクセスすることができます。
    PHPUnit などのアプリケーションでは、
    この情報をもとに実行時の振る舞いを設定するのです。
  </p><div class="alert alert-info"><h3 class="title">注記</h3><p>
      PHP の doc コメントは、<code class="literal">/**</code> で始めて
      <code class="literal">*/</code> で終わる必要があります。
      その他の形式のコメントで書いたアノテーションは、無視されます。
    </p></div><p>
    本章では、PHPUnit がサポートするすべてのアノテーションについて解説します。
  </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.author"></a>@author</h2></div></div></div><p>
      <a id="idp1386240" class="indexterm"></a>

      <code class="literal">@author</code> アノテーションは
      <code class="literal">@group</code> アノテーション (<a class="xref" href="appendixes.annotations.html#appendixes.annotations.group" title="@group">「@group」</a> を参照ください) のエイリアスで、
      テストの作者にもとづいたフィルタリングができるようになります。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.after"></a>@after</h2></div></div></div><p>

      <code class="literal">@after</code> アノテーションを使うと、
      テストケースクラス内の各テストメソッドを実行した後に呼ぶメソッドを指定できます。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @after
     */
    public function tearDownSomeFixtures()
    {
        // ...
    }

    /**
     * @after
     */
    public function tearDownSomeOtherFixtures()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.afterClass"></a>@afterClass</h2></div></div></div><p>

      <code class="literal">@afterClass</code> アノテーションを使うと、
      テストケースクラス内の各テストメソッドを実行した後に呼ぶ静的メソッドを指定できます。
      ここで共有フィクスチャの後始末をします。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @afterClass
     */
    public static function tearDownSomeSharedFixtures()
    {
        // ...
    }

    /**
     * @afterClass
     */
    public static function tearDownSomeOtherSharedFixtures()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.backupGlobals"></a>@backupGlobals</h2></div></div></div><p>
      <a id="idp1604704" class="indexterm"></a>

      グローバル変数の保存や復元を、テストケースクラスのすべてのテストで完全に無効にすることができます。
      このように使います。</p><pre class="programlisting">use PHPUnit\Framework\TestCase;

/**
 * @backupGlobals disabled
 */
class MyTest extends TestCase
{
    // ...
}</pre><p>
    </p><p>
      <a id="idp1606576" class="indexterm"></a>

      <code class="literal">@backupGlobals</code> アノテーションは、テストメソッドレベルで使うこともできます。
      これによって、保存と復元の操作をより細やかに制御できるようになります。</p><pre class="programlisting">use PHPUnit\Framework\TestCase;

/**
 * @backupGlobals disabled
 */
class MyTest extends TestCase
{
    /**
     * @backupGlobals enabled
     */
    public function testThatInteractsWithGlobalVariables()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.backupStaticAttributes"></a>@backupStaticAttributes</h2></div></div></div><p>
      <a id="idp1610176" class="indexterm"></a>

      <code class="literal">@backupStaticAttributes</code> アノテーションを使うと、
      宣言されたクラス内のすべての static プロパティの値をバックアップしてからテストを始め、
      テストが終わった後でそれらの値を復元することができます。
      テストケースクラス単位、あるいはテストメソッド単位で使えます。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

/**
 * @backupStaticAttributes enabled
 */
class MyTest extends TestCase
{
    /**
     * @backupStaticAttributes disabled
     */
    public function testThatInteractsWithStaticAttributes()
    {
        // ...
    }
}
</pre><p>
    </p><div class="alert alert-info"><h3 class="title">注記</h3><p>
        PHP の内部的な制約のため、
        <code class="literal">@backupStaticAttributes</code> が、
        意図していない static 値を保存してしまい、
        その後のテストに影響してしまうことがあります。
      </p><p>
        詳細は <a class="xref" href="fixtures.html#fixtures.global-state" title="グローバルな状態">「グローバルな状態」</a> を参照ください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.before"></a>@before</h2></div></div></div><p>

      <code class="literal">@before</code> アノテーションを使うと、
      テストケースクラス内の各テストメソッドを実行する前に呼ぶメソッドを指定できます。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @before
     */
    public function setupSomeFixtures()
    {
        // ...
    }

    /**
     * @before
     */
    public function setupSomeOtherFixtures()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.beforeClass"></a>@beforeClass</h2></div></div></div><p>

      <code class="literal">@beforeClass</code> アノテーションを使うと、
      テストケースクラス内の各テストメソッドを実行する前に呼ぶ静的メソッドを指定できます。
      ここで共有フィクスチャの準備をします。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @beforeClass
     */
    public static function setUpSomeSharedFixtures()
    {
        // ...
    }

    /**
     * @beforeClass
     */
    public static function setUpSomeOtherSharedFixtures()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.codeCoverageIgnore"></a>@codeCoverageIgnore*</h2></div></div></div><p>
      <a id="idp1929648" class="indexterm"></a>
      <a id="idp1930224" class="indexterm"></a>
      <a id="idp1930816" class="indexterm"></a>

      <code class="literal">@codeCoverageIgnore</code> や
      <code class="literal">@codeCoverageIgnoreStart</code>、そして
      <code class="literal">@codeCoverageIgnoreEnd</code> アノテーションを使うと、
      コード内の特定の行をカバレッジ解析の対象外にできます。
    </p><p>
      利用法は <a class="xref" href="code-coverage-analysis.html#code-coverage-analysis.ignoring-code-blocks" title="コードブロックの無視">「コードブロックの無視」</a> を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.covers"></a>@covers</h2></div></div></div><p>
      <a id="idp1935552" class="indexterm"></a>
      <a id="idp1936128" class="indexterm"></a>

      <code class="literal">@covers</code> アノテーションをテストコードで使うと、
      そのテストメソッドがどのメソッドをテストするのかを指定することができます。</p><pre class="programlisting">/**
 * @covers BankAccount::getBalance
 */
public function testBalanceIsInitiallyZero()
{
    $this-&gt;assertEquals(0, $this-&gt;ba-&gt;getBalance());
}</pre><p>
    </p><p>
      これを指定した場合は、指定したメソッドのみのコードカバレッジ情報を考慮することになります。
    </p><p>
      <a class="xref" href="appendixes.annotations.html#appendixes.annotations.covers.tables.annotations" title="表B.1 カバーするメソッドを指定するためのアノテーション">表 B.1</a>
      に <code class="literal">@covers</code> アノテーションの構文を示します。
    </p><div class="table"><a id="appendixes.annotations.covers.tables.annotations"></a><p class="title"><strong>表B.1 カバーするメソッドを指定するためのアノテーション</strong></p><div class="table-contents"><table class="table" summary="カバーするメソッドを指定するためのアノテーション" border="1"><colgroup><col></col><col></col></colgroup><thead><tr><th align="left">アノテーション</th><th align="left">説明</th></tr></thead><tbody><tr><td align="left"><code class="literal">@covers ClassName::methodName</code></td><td align="left"><code class="literal">そのテストメソッドが指定したメソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName</code></td><td align="left"><code class="literal">そのテストメソッドが指定したクラスのすべてのメソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName&lt;extended&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスとその親クラスおよびインターフェイスのすべてのメソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;public&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての public メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;protected&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての protected メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;private&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての private メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;!public&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての非 public メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;!protected&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての非 protected メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ClassName::&lt;!private&gt;</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したクラスのすべての非 private メソッドをカバーすることを表します。</code></td></tr><tr><td align="left"><code class="literal">@covers ::functionName</code></td><td align="left"><code class="literal">そのテストメソッドが、指定したグローバル関数をカバーすることを表します。</code></td></tr></tbody></table></div></div><br class="table-break"></br></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.coversDefaultClass"></a>@coversDefaultClass</h2></div></div></div><p>
      <a id="idp1512064" class="indexterm"></a>

      <code class="literal">@coversDefaultClass</code> アノテーションを使うと、
      デフォルトの名前空間あるいはクラス名を指定できます。
      こうすることで、
      <code class="literal">@covers</code> アノテーションのたびに長い名前を繰り返す必要がなくなります。
      <a class="xref" href="appendixes.annotations.html#appendixes.annotations.examples.CoversDefaultClassTest.php" title="例 B.1: @coversDefaultClass を使ったアノテーションの短縮">例 B.1</a>
      を参照ください。
    </p><div class="example"><a id="appendixes.annotations.examples.CoversDefaultClassTest.php"></a><p class="title"><strong>例 B.1: @coversDefaultClass を使ったアノテーションの短縮</strong></p><div class="example-contents"><pre class="programlisting">&lt;?php
use PHPUnit\Framework\TestCase;

/**
 * @coversDefaultClass \Foo\CoveredClass
 */
class CoversDefaultClassTest extends TestCase
{
    /**
     * @covers ::publicMethod
     */
    public function testSomething()
    {
        $o = new Foo\CoveredClass;
        $o-&gt;publicMethod();
    }
}
?&gt;</pre></div></div><br class="example-break"></br></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.coversNothing"></a>@coversNothing</h2></div></div></div><p>
      <a id="idp1517776" class="indexterm"></a>

      <code class="literal">@coversNothing</code> アノテーションをテストコードで使うと、
      そのテストケースについてはコードカバレッジ情報を記録しないように指定できます。
    </p><p>
        これはインテグレーションテストで使えます。例として
        <a class="xref" href="code-coverage-analysis.html#code-coverage-analysis.specifying-covered-methods.examples.GuestbookIntegrationTest.php" title="例 11.3: どのメソッドもカバーすべきでないことを指定したテスト">例 11.3</a>
        を参照ください。
    </p><p>
        このメソッドはクラスレベルおよびメソッドレベルで使え、
        あらゆる <code class="literal">@covers</code> タグを上書きします。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.dataProvider"></a>@dataProvider</h2></div></div></div><p>
      <a id="idp1522688" class="indexterm"></a>

      テストメソッドには任意の引数を渡すことができます。
      引数は、データプロバイダメソッド
      (<a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers.examples.DataTest.php" title="例 2.5: 配列の配列を返すデータプロバイダの使用">例 2.5</a> の
      <code class="literal">provider()</code>) から渡されます。
      使用するデータプロバイダメソッドを指定するには
      <code class="literal">@dataProvider</code> アノテーションを使います。
    </p><p>
      詳細は <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers" title="データプロバイダ">「データプロバイダ」</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.depends"></a>@depends</h2></div></div></div><p>
      <a id="idp1527712" class="indexterm"></a>

      PHPUnit は、テストメソッド間の依存性の明示的な宣言をサポートしています。
      この依存性とは、テストメソッドが実行される順序を定義するものではありません。
      プロデューサーがテストフィクスチャを作ってそのインスタンスを返し、
      依存するコンシューマーがそれを受け取って利用するというものです。
      <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.examples.StackTest2.php" title="例 2.2: @depends アノテーションを使った依存性の表現">例 2.2</a>
      は、<code class="literal">@depends</code> アノテーションを使ってテストメソッドの依存性をあらわす例です。
    </p><p>
      詳細は <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.test-dependencies" title="テストの依存性">「テストの依存性」</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.expectedException"></a>@expectedException</h2></div></div></div><p>
      <a id="idp1532544" class="indexterm"></a>

      <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions.examples.ExceptionTest.php" title="例 2.10: expectException() メソッドの使用法">例 2.10</a>
      は、テストするコード内で例外がスローされたかどうかを
      <code class="literal">@expectedException</code> アノテーションを使用して調べる方法を示すものです。
    </p><p>
      詳細は <a class="xref" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions" title="例外のテスト">「例外のテスト」</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.expectedExceptionCode"></a>@expectedExceptionCode</h2></div></div></div><p>
      <a id="idp1634272" class="indexterm"></a>

      <code class="literal">@expectedExceptionCode</code> アノテーションを
      <code class="literal">@expectedException</code> と組み合わせて使うと、
      スローされた例外のエラーコードについてのアサーションが可能となり、
      例外をより狭い範囲に特定できるようになります。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @expectedException     MyException
     * @expectedExceptionCode 20
     */
    public function testExceptionHasErrorcode20()
    {
        throw new MyException('Some Message', 20);
    }
}</pre><p>

      テストを実行しやすくし、重複を減らすために、
      ショートカットを使ってクラス定数を指定することができます。
      <code class="literal">@expectedExceptionCode</code> で
      "<code class="literal">@expectedExceptionCode ClassName::CONST</code>" のようにして使います。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
      * @expectedException     MyException
      * @expectedExceptionCode MyClass::ERRORCODE
      */
    public function testExceptionHasErrorcode20()
    {
      throw new MyException('Some Message', 20);
    }
}
class MyClass
{
    const ERRORCODE = 20;
}</pre><p>

    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.expectedExceptionMessage"></a>@expectedExceptionMessage</h2></div></div></div><p>
      <a id="idp1640208" class="indexterm"></a>

      <code class="literal">@expectedExceptionMessage</code> アノテーションは
      <code class="literal">@expectedExceptionCode</code> と似ており、
      例外のエラーメッセージに関するアサーションを行います。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @expectedException        MyException
     * @expectedExceptionMessage Some Message
     */
    public function testExceptionHasRightMessage()
    {
        throw new MyException('Some Message', 20);
    }
}</pre><p>

      期待するメッセージを、例外メッセージの一部にすることもできます。
      これは、特定の名前や渡したパラメータが例外に表示されることを確かめたいけれども
      例外メッセージ全体は固定していない場合に便利です。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
     /**
      * @expectedException        MyException
      * @expectedExceptionMessage broken
      */
     public function testExceptionHasRightMessage()
     {
         $param = "broken";
         throw new MyException('Invalid parameter "'.$param.'".', 20);
     }
}</pre><p>

      テストを実行しやすくし、重複を減らすために、
      ショートカットを使ってクラス定数を指定することができます。
      <code class="literal">@expectedExceptionMessage</code> で
      "<code class="literal">@expectedExceptionMessage ClassName::CONST</code>" のようにして使います。

      サンプルコードは <a class="xref" href="appendixes.annotations.html#appendixes.annotations.expectedExceptionCode" title="@expectedExceptionCode">「@expectedExceptionCode」</a> を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.expectedExceptionMessageRegExp"></a>@expectedExceptionMessageRegExp</h2></div></div></div><p>
      <a id="idp1647040" class="indexterm"></a>

      期待するメッセージを、<code class="literal">@expectedExceptionMessageRegExp</code>
      アノテーションを使って正規表現で指定することもできます。
      これは、部分文字列だけでは指定したメッセージとのマッチングが不十分なときに便利です。

      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
     /**
      * @expectedException              MyException
      * @expectedExceptionMessageRegExp /Argument \d+ can not be an? \w+/
      */
     public function testExceptionHasRightMessage()
     {
         throw new MyException('Argument 2 can not be an integer');
     }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.group"></a>@group</h2></div></div></div><p>
      <a id="idp1650768" class="indexterm"></a>

      あるテストを、ひとつあるいは複数のグループに属するものとすることができます。
      <code class="literal">@group</code> アノテーションをこのように使用します。</p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @group specification
     */
    public function testSomething()
    {
    }

    /**
     * @group regresssion
     * @group bug2204
     */
    public function testSomethingElse()
    {
    }
}</pre><p>
    </p><p>
      特定のグループに属するテストのみを選んで実行するには、
      コマンドラインのテストランナーの場合は
      <code class="literal">--group</code> オプションあるいは <code class="literal">--exclude-group</code>
      オプションを指定します。XML 設定ファイルの場合は、
      それぞれ対応するディレクティブを指定します。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.large"></a>@large</h2></div></div></div><p>
      <a id="idp1655936" class="indexterm"></a>

      <code class="literal">@large</code> アノテーションは、
      <code class="literal">@group large</code> のエイリアスです。
    </p><p>
      <a id="idp1658016" class="indexterm"></a>
      <a id="idp1658720" class="indexterm"></a>

      <code class="literal">PHP_Invoker</code> パッケージがインストールされていて strict モードが有効な場合に、
      large テストは実行時間が 60 秒を超えたら失敗します。
      このタイムアウト時間は、XML 設定ファイルの
      <code class="literal">timeoutForLargeTests</code> 属性で変更できます。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.medium"></a>@medium</h2></div></div></div><p>
      <a id="idp1662208" class="indexterm"></a>

      <code class="literal">@medium</code> アノテーションは
      <code class="literal">@group medium</code> のエイリアスです。
      medium テストは、<code class="literal">@large</code> とマークしたテストに依存してはいけません。
    </p><p>
      <a id="idp1664816" class="indexterm"></a>
      <a id="idp1665520" class="indexterm"></a>

      <code class="literal">PHP_Invoker</code> パッケージがインストールされていて strict モードが有効な場合に、
      medium テストは実行時間が 10 秒を超えたら失敗します。
      このタイムアウト時間は、XML 設定ファイルの
      <code class="literal">timeoutForMediumTests</code> 属性で変更できます。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.preserveGlobalState"></a>@preserveGlobalState</h2></div></div></div><p>
      <a id="idp1669024" class="indexterm"></a>

      テストを別プロセスで実行するときに、
      PHPUnit は親プロセスのグローバルな状態を保存しようと試みます。
      親プロセスのすべてのグローバル状態をシリアライズし、
      子プロセス内で最後にそれをアンシリアライズするのです。
      しかし、親プロセスのグローバル状態の中にもしシリアライズできないものがあれば、
      問題が発生します。この問題に対応するために、グローバル状態の保存を無効にすることができます。
      そのために使うのが <code class="literal">@preserveGlobalState</code> アノテーションです。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @runInSeparateProcess
     * @preserveGlobalState disabled
     */
    public function testInSeparateProcess()
    {
        // ...
    }
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.requires"></a>@requires</h2></div></div></div><p>
      <a id="idp1672976" class="indexterm"></a>

      <code class="literal">@requires</code> アノテーションを使うと、共通の事前条件
      (たとえば PHP のバージョンや拡張モジュールのインストール状況)
      を満たさないときにテストをスキップできます。
    </p><p>
      <a id="idp1674784" class="indexterm"></a>
      条件に指定できる内容やその例については
      <a class="xref" href="incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.requires.tables.api" title="表7.3 @requires の例用例">表 7.3</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.runTestsInSeparateProcesses"></a>@runTestsInSeparateProcesses</h2></div></div></div><p>
      <a id="idp1677808" class="indexterm"></a>

      テストクラス内のすべてのテストケースを、個別の PHP プロセスで実行するように指示します。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

/**
 * @runTestsInSeparateProcesses
 */
class MyTest extends TestCase
{
    // ...
}</pre><p>

      <span class="strong"><strong>注意:</strong></span>
      デフォルトで、PHPUnit は親プロセスのグローバルな状態を保存しようと試みます。
      親プロセスのすべてのグローバル状態をシリアライズし、
      子プロセス内で最後にそれをアンシリアライズするのです。
      しかし、親プロセスのグローバル状態の中にもしシリアライズできないものがあれば、
      問題が発生します。この問題に対応するために、グローバル状態の保存を無効にすることができます。
      この問題の対処法については <a class="xref" href="appendixes.annotations.html#appendixes.annotations.preserveGlobalState" title="@preserveGlobalState">「@preserveGlobalState」</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.runInSeparateProcess"></a>@runInSeparateProcess</h2></div></div></div><p>
      <a id="idp1682640" class="indexterm"></a>

      そのテストを個別の PHP プロセスで実行するように指示します。
      </p><pre class="programlisting">use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @runInSeparateProcess
     */
    public function testInSeparateProcess()
    {
        // ...
    }
}</pre><p>

      <span class="strong"><strong>注意:</strong></span>
      デフォルトで、PHPUnit は親プロセスのグローバルな状態を保存しようと試みます。
      親プロセスのすべてのグローバル状態をシリアライズし、
      子プロセス内で最後にそれをアンシリアライズするのです。
      しかし、親プロセスのグローバル状態の中にもしシリアライズできないものがあれば、
      問題が発生します。この問題に対応するために、グローバル状態の保存を無効にすることができます。
      この問題の対処法については <a class="xref" href="appendixes.annotations.html#appendixes.annotations.preserveGlobalState" title="@preserveGlobalState">「@preserveGlobalState」</a>
      を参照ください。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.small"></a>@small</h2></div></div></div><p>
      <a id="idp1687456" class="indexterm"></a>

      <code class="literal">@small</code> アノテーションは
      <code class="literal">@group small</code> のエイリアスです。
      small テストは、<code class="literal">@medium</code> や <code class="literal">@large</code> とマークしたテストに依存してはいけません。
    </p><p>
      <a id="idp1690512" class="indexterm"></a>
      <a id="idp1691216" class="indexterm"></a>

      <code class="literal">PHP_Invoker</code> パッケージがインストールされていて strict モードが有効な場合に、
      small テストは実行時間が 1 秒を超えたら失敗します。
      このタイムアウト時間は、XML 設定ファイルの
      <code class="literal">timeoutForSmallTests</code> 属性で変更できます。
    </p><div class="alert alert-info"><h3 class="title">注記</h3><p>
        テストの実行時間の制限を有効にするには、<code class="literal">@small</code>、
        <code class="literal">@medium</code>、<code class="literal">@large</code>
        のいずれかのアノテーションで明示的に指定する必要があります。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.test"></a>@test</h2></div></div></div><p>
      <a id="idp1697072" class="indexterm"></a>

      テストメソッド名の先頭に <code class="literal">test</code>
      をつけるかわりに、メソッドのドキュメンテーションブロックで <code class="literal">@test</code>
      アノテーションを使ってそのメソッドがテストメソッドであることを指定することができます。
      </p><pre class="programlisting">/**
 * @test
 */
public function initialBalanceShouldBe0()
{
    $this-&gt;assertEquals(0, $this-&gt;ba-&gt;getBalance());
}</pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.testdox"></a>@testdox</h2></div></div></div><p>
      <a id="idp1700960" class="indexterm"></a>
      <a id="idp1701536" class="indexterm"></a>
    </p><pre class="programlisting"></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.ticket"></a>@ticket</h2></div></div></div><p>
      <a id="idp1704032" class="indexterm"></a>
    </p><pre class="programlisting"></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="appendixes.annotations.uses"></a>@uses</h2></div></div></div><p>
      <a id="idp1706528" class="indexterm"></a>

      <code class="literal">@uses</code> アノテーションは、
      テストから実行されてはいるが、そのテストでカバーするつもりはないコードを指定します。
      たとえば、コード片をテストするために必要な値オブジェクトなどに使います。
      </p><pre class="programlisting">/**
 * @covers BankAccount::deposit
 * @uses   Money
 */
public function testMoneyCanBeDepositedInAccount()
{
    // ...
}</pre><p>
    </p><p>
      このアノテーションは、厳密なカバレッジモードで使うと特に有用です。
      このモードの場合、意図せずカバーしてしまったコードがテストを失敗させてしまうことがあるからです。
      厳密なカバレッジモードに関する詳細な情報は
      <a class="xref" href="risky-tests.html#risky-tests.unintentionally-covered-code" title="意図せぬうちにカバーされているコード">「意図せぬうちにカバーされているコード」</a>
      を参照ください。
    </p></div></div>
     <div class="row">
      <div class="col-md-1 pull-left prev-nav"><a accesskey="p" href="appendixes.assertions.html">戻る</a></div>
      <div class="col-md-1 pull-right next-nav"><a accesskey="n" href="appendixes.configuration.html">次へ</a></div>
     </div>

   </div>
   <hr/>
   <footer>
    <p><a href="appendixes.copyright.html">Copyright</a> &copy; 2005-2017 <a href="http://sebastian-bergmann.de/">Sebastian Bergmann</a>.</p>
   </footer>
  </div>
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/highlight.pack.js"></script>
  <script type="text/javascript">
  $(document).ready(function() { $('pre.programlisting').each(function(i, e) {hljs.highlightBlock(e)}); });
  </script>
 </body>
</html>
